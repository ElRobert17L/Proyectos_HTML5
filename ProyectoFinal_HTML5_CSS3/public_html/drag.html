<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Ejercicio Final</title>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="css/estilos.css"/>
        <link href="css/escritorio.css" rel="stylesheet" type="text/css" media="only screen and (min-width:769px)" >
        <link href="css/tablets.css" rel="stylesheet" type="text/css"    media="only screen and (max-width: 768px) and (min-width:481px)" >
        <link href="css/moviles.css" rel="stylesheet" type="text/css"    media="only screen and (max-width: 480px) and (min-width:0px)" >
        <meta name="viewport" content="width=device-width">
        <script src="js/libs/jquery-1.9.0/jquery.min.js"></script>
        <script src="js/libs/modernizr-2.6.2/modernizr.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                if (Modernizr.draganddrop) {
                    //Registramos el método listener dragstart sobre la imagen que vamos a mover
                    $('#img1').bind("dragstart", manejoDragStart);
                    $('#img2').bind("dragstart", manejoDragStart);
                    $('#img3').bind("dragstart", manejoDragStart);
                    $('#img4').bind("dragstart", manejoDragStart);

                    //Registramos los métodos listener dragover y drop en la zona que recibirá el evento
                    $('#zona_arrastrar').bind({
                        "dragover": manejoDragOver,
                        "drop": manejoDrop
                    });
                } else {
                    alert("Tu navegador NO soporta Drag and Drop");
                }

                //Solo es necesario si se usa JQuery
                //http://weblog.bocoup.com/using-datatransfer-with-jquery-events/
                $.event.props.push('dataTransfer');

                //Funcion que se ejecuta al arrastrar el elemento a depositar en la zona de arrastrar_soltar
                function manejoDragStart(evento) {
                    $("#msg_eventos").html("Inicio del evento Arrastrar: " + evento.target.id);
                    //Transferimos el id de la imagen seleccionada
                    evento.dataTransfer.setData('text/html', this.id);
                }

                //Funcion que se ejecuta cuando estamos sobre la zona de arrastrar_soltar
                function manejoDragOver(evento) {
                    evento.stopPropagation();
                    evento.preventDefault();
                    $("#msg_eventos").html("Manejo dragover en: " + evento.target.id);
                }

                //Funcion que se ejecuta soltamos el elemento en la zona de arrastrar_soltar
                function manejoDrop(evento) {
                    evento.stopPropagation();
                    evento.preventDefault();
                    $("#msg_eventos").html("Manejo drop en: " + evento.target.id);
                    var idImgSel = evento.dataTransfer.getData('text/html');
                    $("#elementos").append(idImgSel + " ");
                    //Agregamos la imagen a la zona de drag&drop (target en este caso)
                    evento.target.appendChild(document.getElementById(idImgSel));
                }

            });
        </script>
    </head>
    <body>
        <div class="cabecero-contenedor">
            <header class="contenedor clearfix">
                <h1 class="titulo">Ejercicio Final</h1>
                <nav>
                    <ul>
                        <li><a href="formularios.html">Formularios</a></li>
                        <li><a href="video.html">Video</a></li>
                        <li><a href="drag.html">Drag & Drop</a></li>
                    </ul>
                </nav>
                <!--<div style="clear:both"></div>-->
            </header>
        </div>

        <h1>Transferencia Datos Drag & Drop</h1>
        <div id="msg_eventos"></div>
        <figure>
            <img id="img1" ondragover="return false;" draggable="true" src="recursos/laptop.png" alt="Laptop">
            <img id="img2" draggable="true" src="recursos/monitor.png" alt="Monitor">
            <img id="img3" draggable="true" src="recursos/berenjena.png" alt="Berenjena">
            <img id="img4" draggable="true" src="recursos/pimiento.png" alt="Pimiento">
            <figcaption>Imágenes a arrastrar:</figcaption>
        </figure>
        <div id="zona_arrastrar"> Arrastra las imágenes:</div>
        <p class="seleccionP">Elementos Seleccionados:
        <div id="elementos"></div>

        <div class="pie_pagina-contenedor">
            <footer class="contenedor">
                <h3>Pie de página</h3>
            </footer>
        </div>
    </body>
</html>
